#include <iostream>
#include <stdio.h>

#include "lexer.h"
#include "automata.h"

using namespace std;

int main(){
    
    vector<char> symbols{
        '0','1','2','3','4','5','6','7','8','9',
        'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
        '.','-',' ','\n'
    };
    vector<vector<int>> states{
        /*               0  1  2  3  4  5  6  7  8  9   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p   q   r   s   t   u   v   w   x   y   z  .   - ' '  \n  ot */ 
        /* Estado 00 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
        /* Estado 01 */ {7, 7, 7, 7, 7, 7, 7, 7, 7, 7,  4,  4,  4,  4,  4,  4,  4,  4,  2,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 5,  9, 12,  0, 13},
        /* Estado 02 */ {4, 4, 4, 4, 4, 4, 4, 4, 4, 4,  4,  4,  4,  4,  4,  3,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 0,  0,  0,  0,  0},
        /* Estado 03 */ {4, 4, 4, 4, 4, 4, 4, 4, 4, 4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 0,  0,  0,  0,  0},
        /* Estado 04 */ {4, 4, 4, 4, 4, 4, 4, 4, 4, 4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 0,  0,  0,  0,  0},
        /* Estado 05 */ {6, 6, 6, 6, 6, 6, 6, 6, 6, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
        /* Estado 06 */ {6, 6, 6, 6, 6, 6, 6, 6, 6, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
        /* Estado 07 */ {7, 7, 7, 7, 7, 7, 7, 7, 7, 7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 8,  0,  0,  0,  0},
        /* Estado 08 */ {8, 8, 8, 8, 8, 8, 8, 8, 8, 8,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
        /* Estado 09 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 10,  0,  0,  0},
        /* Estado 10 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 0,  0,  0, 11,  0},
        /* Estado 11 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
        /* Estado 12 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0, 12,  0,  0},
        /* Estado 13 */ {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0,  0,  0,  0,  0},
    };

    vector<int> final_states    {2,    3,   4,     5,       6,      7,     8,      9,       11,        12,            13     };
    vector<string> token_class  {"ID", "IF", "ID", "error", "REAL", "NUM", "REAL", "error", "comment", "white space", "error"};

    // string inputAux;
    // while (getline(cin, inputAux))
    // {
    //     input = input.append(inputAux);
    // }

    string input; 
    char c;
    while(fscanf(stdin, "%c", &c) != EOF){
        input += c;
    }

    Automata automata(symbols, states, 1, final_states, token_class);
    Lexer lexer(automata);
    lexer.scan(input);

    return 0;
}